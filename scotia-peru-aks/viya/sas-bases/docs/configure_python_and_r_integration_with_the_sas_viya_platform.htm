<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="sas.css"/>
        <title>Configure Python and R Integration with the SAS Viya Platform</title>
    </head>
    <body>
        <h1 id="139729114300864configure-python-and-r-integration-with-the-sas-viya-platform">Configure Python and R Integration with the SAS Viya Platform</h1>
<h2 id="139729114300864table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#139729114300864overview">Overview</a></li>
<li><a href="#139729114300864prerequisites">Prerequisites</a></li>
<li><a href="#139729114300864deployment-workflow">Deployment Workflow</a>:<ol>
<li><a href="#1397291143008641-installation-of-python-from-source">Installation of Python from Source</a></li>
<li><a href="#1397291143008642-installation-of-r-from-source">Installation of R from Source</a></li>
<li><a href="#1397291143008643--mount-directories-for-python-and-r">Mount Directories for Python and R</a></li>
<li><a href="#1397291143008644-configure-the-sas-viya-platform-to-connect-to-python-and-r">Configure the SAS Viya Platform to Connect to Python and R</a></li>
<li><a href="#1397291143008645-enable-lockdown-access-methods">Enable LOCKDOWN Access Methods</a></li>
<li><a href="#1397291143008646-configure-external-access-to-cas">Configure External Access to CAS</a></li>
<li><a href="#1397291143008647-optional-configure-sas-model-repository-service-for-python-and-r-models">(Optional) Configure SAS Model Repository Service for Python and R Models</a></li>
</ol>
</li>
<li><a href="#139729114300864additional-resources">Additional Resources</a></li>
</ul>
<h2 id="139729114300864overview">Overview</h2>
<p>The SAS Viya platform can allow two-way communication between SAS (CAS and Compute
engines) and open-source environments (Python and R). With open-source language
integration, SAS users can decide which language they want to use for a given task.
This README provides an overview of the steps to install, configure, and deploy
Python and R for integration with the SAS Viya platform.</p>
<p>For comprehensive documentation related to the configuration of open-source
language integration, including the use of the SAS Configurator for Open Source
tool that partially automates the setup, see <a href="https://documentation.sas.com/?cdcId=itopscdc&amp;cdcVersion=default&amp;docsetId=dplyexternlang&amp;docsetTarget=titlepage.htm">SAS Viya Platform:
Integration with External Languages</a>.</p>
<h2 id="139729114300864prerequisites">Prerequisites</h2>
<p>The SAS Viya platform provides YAML files that the Kustomize tool uses to configure
Python. Before you use those files, verify that you have fulfilled the system requirements:</p>
<ul>
<li>Persistent storage for your SAS Viya platform deployment, such as an NFS server
that can be mounted as a persistent volume. For more information, see
<a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/n05j01yd16icw8n1qd03ty4c4jan.htm">Requirements for Open-Source Integration</a>.</li>
<li>Access to the public internet so that you can download and install Python or R.</li>
</ul>
<p>If your SAS Viya platform environment does not have public internet access, you
must first download, install, and configure Python or R onto a separate internet-connected
Linux environment. Then package up the directories (in a tarball, for
example) and copy them to the persistent storage available to your SAS Viya
platform environment. For more information, see <a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p06p36ppspce2nn128wmk4ttgf7r.htm">Install Python</a> or <a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/n1njppp7m1d2fgn1ltsogu5da4z0.htm">Install R</a>.</p>
<h2 id="139729114300864deployment-workflow">Deployment Workflow</h2>
<p>Each of the following numbered sections provides details about installation and
configuration steps required to enable various open source integration points.</p>
<ul>
<li>To enable the use of Python and R code in SAS programs for data processing and
model development in the SAS Viya platform, complete Steps 1-6.</li>
<li>To enable external access to CAS from open-source programming languages, including
Python and R, complete Step 6.</li>
<li>To enable the registration and publishing of open-source models using SAS
Model Manager, complete Steps 1-5 (to enable open-source modeling) and Step 7.</li>
</ul>
<h3 id="1397291143008641-installation-of-python-from-source">1. Installation of Python from Source</h3>
<p>Install Python from source in a persistent volume that will be mounted to the
SAS Viya platform pods. For more information, see <a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p06p36ppspce2nn128wmk4ttgf7r.htm">Install Python</a>.</p>
<p>SAS provides the SAS Configurator for Open Source utility
to partially automate the download and installation of Python from source. For
more information, see
<a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p0thq20dh3hv7qn19lo6gmlp6vir.htm">Deploying and Using SAS Configurator for Open Source</a>.</p>
<p>Python is installed into a persistent volume that is mounted to the SAS Viya
platform pods in <a href="#1397291143008643-mount-directories-for-python-and-r">Step 3</a>.</p>
<h3 id="1397291143008642-installation-of-r-from-source">2. Installation of R from Source</h3>
<p>Install R from source in a persistent volume that will be mounted to the SAS Viya
platform pods. For more information, see <a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/n1njppp7m1d2fgn1ltsogu5da4z0.htm">Install R</a>.</p>
<p>SAS provides the SAS Configurator for Open Source utility
to partially automate the download and installation of R from source. For
more information, see
<a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p0thq20dh3hv7qn19lo6gmlp6vir.htm">Deploying and Using SAS Configurator for Open Source</a>.</p>
<p>R is installed into a persistent volume that is mounted to the SAS Viya platform
pods in <a href="#1397291143008643--mount-directories-for-python-and-r">Step 3</a>.</p>
<p>After installing R, you should also download and install all desired R packages
(for example, by starting an R session and executing the
<code>install.packages(my-desired-package)</code> command). The
<a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/n1vzd0rlkcwu42n1rxcya8h62xez.htm#n1pnrpz7srq53jn1omu14cymlult">official documentation</a>
provides advice about modifying the R and Rscript files, which contain some hardcoded
paths, and copying shared libraries.</p>
<h3 id="1397291143008643-mount-directories-for-python-and-r">3. Mount Directories for Python and R</h3>
<p>Add NFS mounts for Python and R directories. Now that Python and R are installed
in your persistent storage, you need to mount those directories so that they
are available for the SAS Viya platform pods. Do this by copying transformers
for Python and R from the
<code>$deploy/sas-bases/examples/sas-open-source-config/python</code> and
 <code>$deploy/sas-bases/examples/sas-open-source-config/r</code> directories into your
 <code>$deploy/site-config/sas-open-source-config</code> directories for Python and R. For
 the steps, see the following sections of the official documentation:</p>
<ul>
<li>For Python, <a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p1m8h0fdcaxddfn178z3h3xaos6c.htm">Configure and Enable the Connection to Python</a></li>
<li>For R, <a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/n0f9aytxpxatsxn158a5yquzxf1v.htm">Configure and Enable the Connection to R</a></li>
</ul>
<h3 id="1397291143008644-configure-the-sas-viya-platform-to-connect-to-python-and-r">4. Configure the SAS Viya Platform to Connect to Python and R</h3>
<p>Now enable the SAS Viya platform to connect to the Python and R
binaries that you installed in the mounted persistent storage volumes.
If you are using SAS Configurator for Open Source, see:</p>
<ul>
<li><a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p0g316mrti30tbn1ikah8dph7twz.htm">Configure Python Integration Using SAS Configurator for Open Source</a></li>
<li><a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p0fjbgird05b8yn1okslacke4cpl.htm">Configure R Integration Using SAS Configurator for Open Source</a></li>
</ul>
<p>These steps involve updating the Python- and R-specific <code>kustomization.yaml</code>
files. These YAML files create environment variables that are made
available in the SAS Viya platform pods, providing the locations of the Python
and R executables and libraries.</p>
<p>If you have licensed SAS/IML, you also need to set two environment variables
that enable <code>PROC IML</code> to call R from a SAS program. You can automate the
creation of these environment variables by adding them to
 <code>$deploy/site-config/sas-open-source-config/r/kustomization.yaml</code>, or after
the SAS Viya platform deployment has completed, you can use SAS Environment Manager
to add them. For more information, see
<a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/n01wvjxr2qv3h5n1dieons09vxmg.htm#n0m5jes0anrvdqn17q8xq06g78if">Requirements for SAS/IML</a>.</p>
<p>If you plan to use the EXTLANG package that is required for FCMP and PROC TSMODEL,
both Python and R require you to create an extlang XML file to provide
external language settings. For more information, see
<a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p1ahtg50rjoy6vn15h69jzaor9ej.htm#n1mkb2ixjg9qzdn1sv84je1g57ex">Use an extlang.xml File</a>.</p>
<h3 id="1397291143008645-enable-lockdown-access-methods">5. Enable LOCKDOWN Access Methods</h3>
<p>This step opens up communication between Python or R and the SAS Viya platform.
LOCKDOWN  is a security feature in SAS that restricts access to specific system
files and language features. LOCKDOWN is enabled by default for the SAS Viya
platform Compute server.</p>
<p>You must manually enable <code>python</code> and <code>python_embed</code> methods for most, if not
all, Python integration points in order to bypass LOCKDOWN restrictions. The
<code>socket</code> method is also required to enable <code>PROC PYTHON</code> and the Python Code
Editor. For more information, see <a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p0w7q1enfoar5tn1xlpuh6aid83u.htm#n00uqhlap03y53n11zgg88ekgn2p">Enable LOCKDOWN Access Methods</a>
in the official documentation.</p>
<h3 id="1397291143008646-configure-external-access-to-cas">6. Configure External Access to CAS</h3>
<p>By default, CAS resources can be accessed by Python or R from within the cluster,
but not from clients that are external to the cluster. Additional configuration
steps are required to enable end users to access CAS resources
from outside the cluster (such as from an existing JupyterHub deployment elsewhere
or from a desktop installation of R-Studio). For more information, see
 <a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/n1v5hyvyczigzsn13lacueqzljg3.htm">Configure External Access to the CAS Server</a>.</p>
<p>External connections to the SAS Viya platform, including connections to the CAS
server, can also be made using resources that SAS provides for developers,
open-source programmers, and system administrators who want to leverage or
manage the computational capabilities of the SAS Viya platform from open-source
coding interfaces. See the <a href="https://developer.sas.com/home.html">SAS Developer Home page</a>
for information about the various collections of resources.</p>
<h3 id="1397291143008647-optional-configure-sas-model-repository-service-for-python-and-r-models">7. (Optional) Configure SAS Model Repository Service for Python and R Models</h3>
<p>The SAS Viya platform must be configured to enable users to register and
publish open-source models in the SAS Viya platform. The steps to take are
provided within the official documentation. For more information, see the
following:</p>
<ul>
<li><a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/n01wvjxr2qv3h5n1dieons09vxmg.htm#n02q85napamjvin12jikzg2af1yc">Requirements for the SAS Model Repository Service</a></li>
<li><a href="https://documentation.sas.com/doc/en/itopscdc/default/dplyexternlang/p1gh3tbu0r6jihn1hndt965nuvic.htm">Enable the SAS Model Repository Service</a></li>
<li><a href="https://documentation.sas.com/?cdcId=sasadmincdc&amp;cdcVersion=default&amp;docsetId=calpubdest&amp;docsetTarget=n1i7t4fs3kdr88n1uj6h47e39w1b.htm">SAS Viya Platform: Publishing Destinations</a></li>
<li><a href="https://documentation.sas.com/?cdcId=sasadmincdc&amp;cdcVersion=default&amp;docsetId=calmodels&amp;docsetTarget=n11vwdrly0qi10n1pq1h13t890e2.htm">SAS Viya Platform: Models Administration &ndash; Configuring Support for Open-Source Models</a></li>
<li><a href="https://documentation.sas.com/?cdcId=mdlmgrcdc&amp;cdcVersion=default&amp;docsetId=mdlmgrag&amp;docsetTarget=p1pux2up89u0nln1fub8zb2aqets.htm">SAS Model Manager: Administrator&rsquo;s Guide &ndash; Configuring Support for Python Code Files</a></li>
<li><a href="https://github.com/sassoftware/model-management-resources/tree/main/addons">SAS GitHub: Model Management Resources</a></li>
</ul>
<h2 id="139729114300864additional-resources">Additional Resources</h2>
<p>The SAS Viya platform also supports direct integration with Git within the SAS
Studio interface. Update the properties described in the following resources:</p>
<ul>
<li><a href="https://documentation.sas.com/?cdcId=webeditorcdc&amp;cdcVersion=default&amp;docsetId=webeditorag&amp;docsetTarget=p1a2vn20wzwkumn1freonkz81mx5.htm">SAS Studio Administrator&rsquo;s Guide: Configuration Properties for Git Integration</a>:
Identifies the relevant configuration properties to enable Git integration</li>
<li><a href="https://documentation.sas.com/?cdcId=webeditorcdc&amp;cdcVersion=default&amp;docsetId=webeditorag&amp;docsetTarget=n0kxc7fd8os3nbn14nrddoli75x2.htm">SAS Studio Administrator&rsquo;s Guide: General Configuration Properties</a>:
Describes configuration properties that are required to enable Git functionality</li>
</ul>
<p>You can find additional useful information related to open-source integration in
the following documents:</p>
<ul>
<li><a href="https://documentation.sas.com/doc/en/itopscdc/default/itopssr/p1n66p7u2cm8fjn13yeggzbxcqqg.htm#p19cpvrrjw3lurn135ih46tjm7oi">SAS Viya Platform System Requirements: Integrating Open Source Tools</a></li>
<li><a href="https://documentation.sas.com/?cdcId=itopscdc&amp;cdcVersion=default&amp;docsetId=dplyml0phy0dkr&amp;docsetTarget=n08u2yg8tdkb4jn18u8zsi6yfv3d.htm#n0exq3y1b5gs73n18vi9o78y2dg3">SAS Viya Platform Deployment: Configure External Access to CAS</a></li>
<li><a href="https://github.com/sassoftware/Python-swat/">Python-SWAT GitHub repository</a></li>
<li><a href="https://github.com/sassoftware/R-swat/">R-SWAT GitHub repository</a></li>
<li><a href="https://developer.sas.com/home.html">SAS Developer Home page</a></li>
</ul>
    </body>
</html>