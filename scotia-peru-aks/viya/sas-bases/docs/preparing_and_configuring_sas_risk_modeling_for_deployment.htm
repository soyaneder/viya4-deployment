<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="sas.css"/>
        <title>Preparing and Configuring SAS Risk Modeling for Deployment</title>
    </head>
    <body>
        <h1 id="139729114174944preparing-and-configuring-sas-risk-modeling-for-deployment">Preparing and Configuring SAS Risk Modeling for Deployment</h1>
<h2 id="139729114174944prerequisites">Prerequisites</h2>
<p>When SAS Risk Modeling is deployed, its content is integrated with the SAS Risk
Cirrus platform. The platform includes a common layer, Cirrus Core, that is used
by multiple solutions. Therefore, in order to deploy the SAS Risk Modeling
solution successfully, you must deploy the Cirrus Core content in addition to
the solution content. Preparing and configuring Cirrus Core for deployment is
described in the Cirrus Core README at
<code>$deploy/sas-bases/examples/sas-risk-cirrus-rcc/README.md</code> (Markdown
format) or
<code>$deploy/sas-bases/docs/preparing_and_configuring_cirrus_core_for_deployment.htm</code>
(HTML format).</p>
<p>The Risk Cirrus Core README also contains information about storage options, such as external databases, for your solution. You must complete the pre-deployment described in the Risk Cirrus Core README before deploying SAS Risk Modeling. Please read that document for important information about the deployment tasks that should be completed prior to deploying SAS Risk Modeling.</p>
<p><strong>IMPORTANT:</strong> You must complete the step <code>Modify the Configuration for Risk Cirrus Core</code>. Because SAS Risk Modeling uses workflow service tasks, a user account must be configured for a workflow client. If you know which user account you want to use and want to configure it during installation, set the <code>SAS_RISK_CIRRUS_SET_WORKFLOW_SERVICE_ACCOUNT_FLG</code> variable to &ldquo;Y&rdquo; and specify the user account in the value of the <code>SAS_RISK_CIRRUS_WORKFLOW_DEFAULT_SERVICE_ACCOUNT</code> variable.</p>
<p>For more information about deploying Risk Cirrus Core, you can also read <a href="https://documentation.sas.com/?cdcId=cirruscdc&amp;cdcVersion=default&amp;docsetId=cirrusag&amp;docsetTarget=n0epbo3xtwa3o2n1g13zjxezgmgn.htm">Deployment Tasks</a> in the <em>SAS Risk Cirrus: Administrator&rsquo;s Guide</em>.</p>
<h2 id="139729114174944installation">Installation</h2>
<ol>
<li>
<p>If you have a <code>$deploy/site-config/sas-risk-cirrus-rm/resources</code> directory, delete it and its contents. Remove the reference to this directory from the transformers section of your base <code>kustomization.yaml</code> file (<code>$deploy/kustomization.yaml</code>). This step should only be necessary if you are upgrading from a cadence prior to 2025.02.</p>
</li>
<li>
<p>Copy the files in
    <code>$deploy/sas-bases/examples/sas-risk-cirrus-rm</code> to the
    <code>$deploy/site-config/sas-risk-cirrus-rm</code> directory. Create a destination directory if one does not exist.
    <br><br> <strong>IMPORTANT:</strong> If the destination directory already exists, confirm it contains the <code>.env</code> file, not the <code>rm_transform.yaml</code> file that was used for cadences prior to 2025.02. If the directory already exists, and it has the <code>.env</code> file, then <a href="#139729114174944verify-overlay-connection-settings-applied-successfully">verify that the overlay connection settings</a> have been applied correctly. No further actions are required unless you want to change the connection settings to different values.</p>
</li>
<li>
<p>Modify the <code>configuration.env</code> file (located in the <code>$deploy/site-config/sas-risk-cirrus-rm</code> directory). Lines with a <code>#</code> at the beginning are commented out; their values will not be applied during deployment. To override a default provided by SAS for a given variable, uncomment the line by removing the <code>#</code> at the beginning of the line and modify as explained in the following section. Specify, if needed, your settings as follows:</p>
<p><br>a. For <code>SAS_LOG_LEVEL_RISKCIRRUSDEPLOYER</code>, replace {{ INFO-OR-DEBUG }} with the logging level desired. (Default is INFO).  </p>
<p><br>b. For <code>SAS_RISK_CIRRUS_DEPLOYER_INCLUDE_SAMPLES</code>,default =&rsquo;N&rsquo;. Currently, SAS Risk Modeling does not include sample artifacts. Therefore this parameter defaults to &lsquo;N&rsquo;. Do not modify this parameter in the YAML file. In the future, any items marked as sample artifacts will be listed here.</p>
<p><br>c. For <code>SAS_RISK_CIRRUS_DEPLOYER_SKIP_SPECIFIC_INSTALL_STEPS</code>, replace {{ COMMA-SEPARATED-STEPS-IDS-TO-SKIP }} with the IDs of the steps you want to skip. Currently, SAS Risk Modeling requires users to complete all the steps. Set this variable to an empty string.</p>
<p><br>d. For <code>SAS_RISK_CIRRUS_DEPLOYER_RUN_SPECIFIC_INSTALL_STEPS</code>, replace {{ COMMA-SEPARATED-STEPS-IDS-TO-RUN }} with the IDs of the steps you want to run. Typically, this is intended to be used after a deployment has completed successfully, and you need to re-run a specific step without redeploying the entire environment. For example, if you have deleted the prepackaged monitoring plans or KPIs from your environment, then you can set SAS_RISK_CIRRUS_DEPLOYER_RUN_SPECIFIC_INSTALL_STEPS to &ldquo;load_objects&rdquo; and then delete the sas-risk-cirrus-rm pod to force a redeployment. Doing so will <strong>only</strong> run the steps listed in SAS_RISK_CIRRUS_DEPLOYER_RUN_SPECIFIC_INSTALL_STEPS. <strong>WARNING:</strong> This list is absolute; the deployment will only run the steps included in this list. If you are deploying this environment for the first time, this variable should be an empty string, or you risk an incomplete or failed deployment.</p>
<p>The following is an example of a <code>configuration.env</code> that you could use for SAS Risk Modeling. The uncommented parameters will be added to the solution configuration map.</p>
<pre class="highlight"><code class="language-env">SAS_LOG_LEVEL_RISKCIRRUSDEPLOYER=INFO
SAS_RISK_CIRRUS_DEPLOYER_INCLUDE_SAMPLES=N
# SAS_RISK_CIRRUS_DEPLOYER_SKIP_SPECIFIC_INSTALL_STEPS={{ COMMA-SEPARATED-STEPS-IDS-TO-SKIP }}
# SAS_RISK_CIRRUS_DEPLOYER_RUN_SPECIFIC_INSTALL_STEPS={{ COMMA-SEPARATED-STEPS-IDS-TO-RUN }}</code></pre>

</li>
<li>
<p>In the base kustomization.yaml file in the <code>$deploy</code> directory, add
    <code>site-config/sas-risk-cirrus-rm/configuration.env</code> to the <code>configMapGenerator</code> block. Here is an example: </p>
<pre class="highlight"><code class="language-yaml"> configMapGenerator:
   ...
   - name: sas-risk-cirrus-rm-parameters
     behavior: merge
     envs:
       - site-config/sas-risk-cirrus-rm/configuration.env
   ...</code></pre>

</li>
</ol>
<h2 id="139729114174944complete-the-deployment-process">Complete the Deployment Process</h2>
<p>When you have finished configuring your deployment using the README files that are provided, complete the deployment steps to apply the new settings. The method by which the manifest is applied depends on what deployment method is being used. For more information, see <a href="http://documentation.sas.com/?cdcId=itopscdc&amp;cdcVersion=default&amp;docsetId=dplyml0phy0dkr&amp;docsetTarget=p127f6y30iimr6n17x2xe9vlt54q.htm">Deploy the Software</a> in the <em>SAS Viya Platform: Deployment Guide</em>.</p>
<p><strong>Note:</strong> The <code>.env</code> overlay can be applied during or after the initial deployment of the SAS Viya platform.</p>
<ul>
<li>If you are applying the overlay <em>during the initial deployment</em> of the SAS Viya platform, complete all the tasks in the README files that you want to use, and then run
  <code>kustomize build</code> to create and apply the manifests.</li>
<li>If the overlay is applied <em>after the initial deployment</em> of the SAS Viya platform, run
  <code>kustomize build</code> to create and apply the manifests.</li>
</ul>
<h2 id="139729114174944verify-overlay-connection-settings-applied-successfully">Verify Overlay Connection Settings Applied Successfully</h2>
<p>Before verifying the settings for SAS Risk Modeling solution, you should first verify Risk Cirrus Core&rsquo;s settings. Those instructions can be found in the Risk Cirrus Core README. To verify the settings for SAS Risk Modeling, do the following:</p>
<ol>
<li>
<p>Run the following command to verify whether the overlay has been applied to the configuration map:</p>
<pre class="highlight"><code class="language-sh">kubectl describe configmap sas-risk-cirrus-rm-parameters -n &lt;name-of-namespace&gt;</code></pre>

</li>
<li>
<p>Verify that the output contains the desired connection settings that you configured.</p>
</li>
</ol>
<h2 id="139729114174944additional-resources">Additional Resources</h2>
<ul>
<li>For administration information for this solution, see
  <a href="https://go.documentation.sas.com/doc/en/riskmdlcdc/default/riskmdlag/titlepage.htm">SAS Risk Modeling: Administrator&rsquo;s Guide</a>.</li>
<li>For more general deployment content, see
  <a href="https://go.documentation.sas.com/doc/en/itopscdc/default/dplyml0phy0dkr/titlepage.htm">SAS Viya Platform: Deployment Guide</a>.</li>
</ul>
    </body>
</html>